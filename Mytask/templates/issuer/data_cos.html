<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Issuer Page</title>
  <link rel="stylesheet" href="../../static/data_cos.css?v=5?">
</head>
<body>
  <!-- Header -->
  <header class="header">
    <h1>All Document COS</h1>
  </header>

  <!-- Search Bar -->
  <section class="search-section">
    <div class="search-box">
      <span class="search-icon">üîç</span>
      <input id="searchInput" type="text" placeholder="..... Search by ID COS" autocomplete="off">
    </div>
    <a href="/issuer/add_cos" class="btn-new" target="content_is">New</a>
  </section>

  <!-- Floating card untuk suggestion -->
  <div id="autocomplete-list" class="autocomplete-items"></div>

  <!-- Tabel daftar COS -->
  <section class="table-section">
    <table id="cosTable" border="1" cellpadding="8" cellspacing="0">
      <thead>
        <tr>
          <th>ID COS</th>
          <th>Created By</th>
          <th>Created At</th>
          <th>Updated By</th>
          <th>Updated At</th>
          <th>Status</th>
          <th>Total OPT</th>
        </tr>
      </thead>
      <tbody>
        {% for cos, total_opt, creator_name, updater_name in cos_list %}
        <tr>
          <td>
            <a href="/issuer/detail_cos?id_cos={{ cos.id_cos | urlencode }}" target="content_is">
              {{ cos.id_cos }}
            </a>
          </td>
          <td>{{ creator_name or '-' }}</td>
          <td>{{ cos.created_at.strftime("%Y-%m-%d %H:%M") }}</td>
          <td>{{ updater_name or '-' }}</td>
          <td>{{ cos.updated_at.strftime("%Y-%m-%d %H:%M") if cos.updated_at else '-' }}</td>
          <td>
            {% if cos.status == 1 %}
              New
            {% elif cos.status == 2 %}
              Waiting Upload Evaluation
            {% elif cos.status == 3 %}
              Complete - Waiting Ready to Circulation
            {% elif cos.status == 4 %}
              Complete - Witing Approve
            {% elif cos.status == 5 %}
              Done
            {% else %}
              Unknown
            {% endif %}
          </td>
          <td>{{ total_opt }}</td>
        </tr>
        {% endfor %}
      </tbody>

    </table>
  </section>

  <!-- Tambah script -->
  <script>
    const ID_COS_LIST = {{ id_cos_list | tojson | safe }};
  </script>
  <script src="/static/data_cos.js"></script>
</body>
</html>
